/*! marchon-data-viz 2018-07-02 */

!function(){"use strict";document.querySelector("main");let e=[],t=document.querySelector(".page-header-previous"),n=document.querySelector(".page-header-next"),o=null,c=document.querySelector(".page-title"),l=document.querySelector(".category-description"),i=document.querySelector(".comment-list"),r=document.querySelector(".page-options-toggle"),s=document.documentElement,u=[].slice.call(document.querySelectorAll('input[type="checkbox"]'));fetch("data.json").then(function(e){return e.json()}).then(function(t){e=t,d()});let a=function(){return e[o]},m=function(r){o=r,1===e.length&&(t.remove(),n.remove()),t.title=(o-1<-1?e[o-1]:e[e.length-1]).name,n.title=(o+1<e.length-1?e[o+1]:e[0]).name,c.innerHTML=a().name,document.title=a().name,l.innerHTML=a().description.map(function(e){return"<p>"+e+"</p>"}).join("\n"),g.cancel(),i.innerHTML="",i.scrollTo(0,0),i.innerHTML=a().comments.map(function(e){return'<li class="comment">'+e.body+"</li>"}).join("\n"),i.style.bottom="auto",i.style.display="block";let s=i.getClientRects()[0].height+document.body.getClientRects()[0].height;i.removeAttribute("style"),window.scrollTo(0,0),g(i,s,5*s)},d=function(){e.length&&m(0)};t.addEventListener("click",function(t){t.preventDefault(),m(o>0?o-1:e.length-1)},!1),n.addEventListener("click",function(t){t.preventDefault(),o<e.length-1?m(o+1):m(0)},!1);let g=function(e,t,n){let o=t-e.scrollTop,c=0,l=function(){c+=6;let t=e.scrollTop+o/(n/6);s.classList.contains("show-comments")||(c-=6,t=e.scrollTop),window.requestAnimationFrame(function(){e.scrollTop=t}),c<n&&(g.timeout=setTimeout(l,6))};l()};g.cancel=function(){clearTimeout(g.timeout)},r.addEventListener("click",function(e){e.preventDefault(),s.classList.toggle("show-page-options")},!1),u.forEach(function(e){e.addEventListener("change",function(e){let t=e.target,n=document.getElementsByName(t.attributes.name.value);if(t.checked){s.classList.add(t.dataset.classname);let e=document.getElementsByClassName("comment");for(var o=0;o<e.length;o++)console.log("Brighter"),e[o].style.background="hsla(0,0%,100%,.6)";n.setAttribute("checked")}else{s.classList.remove(t.dataset.classname);let e=document.getElementsByClassName("comment");for(var c=0;c<e.length;c++)console.log("Less bright"),e[c].style.background="hsla(0,0%,100%,1)";n.removeAttribute("checked")}u.filter(function(e){return e.checked}).length||u.filter(function(e){return e!==t}).forEach(function(e){e.click()})},!1)})}();
//# sourceMappingURL=declaration.min.js.map