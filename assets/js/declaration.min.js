/*! marchon-data-viz 2018-06-27 */

!function(){"use strict";document.querySelector("main");let e=[],t=document.querySelector(".page-header-previous"),n=document.querySelector(".page-header-next"),o=null,c=document.querySelector(".page-title"),l=document.querySelector(".category-description"),i=document.querySelector(".comment-list"),r=document.querySelector(".page-options-toggle"),s=document.documentElement,u=document.querySelectorAll(".page-options-checkbox");fetch("data.json").then(function(e){return e.json()}).then(function(t){e=t,d()});let a=function(){return e[o]},m=function(r){o=r,1===e.length&&(t.remove(),n.remove()),t.title=(o-1<-1?e[o-1]:e[e.length-1]).name,n.title=(o+1<e.length-1?e[o+1]:e[0]).name,c.innerHTML=a().name,document.title=a().name,l.innerHTML=a().description.map(function(e){return"<p>"+e+"</p>"}).join("\n"),p.cancel(),i.innerHTML="",i.scrollTo(0,0),i.innerHTML=a().comments.map(function(e){return'<li class="comment">'+e.body+"</li>"}).join("\n"),i.style.bottom="auto",i.style.display="block";let s=i.getClientRects()[0].height+document.body.getClientRects()[0].height;i.removeAttribute("style"),window.scrollTo(0,0),p(i,s,5*s)},d=function(){e.length&&m(0)};t.addEventListener("click",function(t){t.preventDefault(),m(o>0?o-1:e.length-1)},!1),n.addEventListener("click",function(t){t.preventDefault(),o<e.length-1?m(o+1):m(0)},!1);let p=function(e,t,n){let o=t-e.scrollTop,c=0,l=function(){c+=16;let t=e.scrollTop+o/(n/16);s.classList.contains("show-comments")||(c-=16,t=e.scrollTop),window.requestAnimationFrame(function(){e.scrollTop=t}),c<n&&(p.timeout=setTimeout(l,16))};l()};p.cancel=function(){clearTimeout(p.timeout)},r.addEventListener("click",function(e){e.preventDefault(),s.classList.toggle("show-page-options")},!1),u.forEach(function(e){e.addEventListener("click",function(e){let t=e.target;t.checked?s.classList.add(t.dataset.classname):s.classList.remove(t.dataset.classname)},!1)})}();
//# sourceMappingURL=declaration.min.js.map