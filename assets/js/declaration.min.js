/*! marchon-data-viz 2018-07-02 */

!function(){"use strict";document.querySelector("main");let e=[],t=document.querySelector(".page-header-previous"),n=document.querySelector(".page-header-next"),c=null,o=document.querySelector(".page-title"),l=document.querySelector(".category-description"),i=document.querySelector(".comment-list"),r=document.querySelector(".page-options-toggle"),u=document.documentElement,s=[].slice.call(document.querySelectorAll('input[type="checkbox"]'));fetch("data.json").then(function(e){return e.json()}).then(function(t){e=t,d()});let a=function(){return e[c]},m=function(r){c=r,1===e.length&&(t.remove(),n.remove()),t.title=(c-1<-1?e[c-1]:e[e.length-1]).name,n.title=(c+1<e.length-1?e[c+1]:e[0]).name,o.innerHTML=a().name,document.title=a().name,l.innerHTML=a().description.map(function(e){return"<p>"+e+"</p>"}).join("\n"),f.cancel(),i.innerHTML="",i.scrollTo(0,0),i.innerHTML=a().comments.map(function(e){return'<li class="comment">'+e.body+"</li>"}).join("\n"),i.style.bottom="auto",i.style.display="block";let u=i.getClientRects()[0].height+document.body.getClientRects()[0].height;i.removeAttribute("style"),window.scrollTo(0,0),f(i,u,5*u)},d=function(){e.length&&m(0)};t.addEventListener("click",function(t){t.preventDefault(),m(c>0?c-1:e.length-1)},!1),n.addEventListener("click",function(t){t.preventDefault(),c<e.length-1?m(c+1):m(0)},!1);let f=function(e,t,n){let c=t-e.scrollTop,o=0,l=function(){o+=8;let t=e.scrollTop+c/(n/8);u.classList.contains("show-comments")||(o-=8,t=e.scrollTop),window.requestAnimationFrame(function(){e.scrollTop=t}),o<n&&(f.timeout=setTimeout(l,8))};l()};f.cancel=function(){clearTimeout(f.timeout)},r.addEventListener("click",function(e){e.preventDefault(),u.classList.toggle("show-page-options")},!1),s.forEach(function(e){e.addEventListener("change",function(e){let t=e.target,n=document.getElementsByName(t.attributes.name.value);t.checked?(u.classList.add(t.dataset.classname),n.setAttribute("checked")):(u.classList.remove(t.dataset.classname),n.removeAttribute("checked")),s.filter(function(e){return e.checked}).length||s.filter(function(e){return e!==t}).forEach(function(e){e.click()})},!1)})}();
//# sourceMappingURL=declaration.min.js.map